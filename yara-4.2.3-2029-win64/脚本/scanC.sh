#!/bin/bash

#运行方法：将.\yara64.exe、rule_lab1以及此脚本放在git的sh.exe下（git/bin加到环境变量中后可在任意环境运行sh），打开sh.exe，cd D:/softerware/git/bin，输入sh scanC.sh /c
function read_dir(){
    for file in `ls $1` #反引号运行系统命令
        do 
            if [ -d $1"/"$file ] #判断是否是文件夹
            then
                read_dir $1"/"$file
            else
                if [ -x $1"/"$file ] #判断是否可执行，-x换成-r表示可读；注意空格
                then
                \.\\yara64.exe my_first_rule $file
                echo $file
                fi
            fi
        done
}


START_TIME=`date +%s`
read_dir $1

END_TIME=`date +%s`
EXECUTING_TIME=`expr $END_TIME - $START_TIME`
echo $EXECUTING_TIME